
\subsection{Grammar Constrained Decoding}
\begin{definition}[GCDChecker]
    \label{def:GCDChecker}
    \uses{def:}
    The actual GCD checker is constructed as follows. We are given the lexer specification and the context free grammar.
    First, build the composite transducer $\transducer_{\alphabet \circ \vocab}$
    Next, build the parser $\pushdown$ associated with the CFG.
    The actual gcd checker is given by first producing the lexing transducer
    todo
\end{definition}

% theorems related to what Kanghee sent
\begin{theorem}[Prefix Sound] 

\end{theorem}

\begin{theorem}[Language of Grammar subset of GCD Checker]
    \label{thm:GrammarSubsetCheckerLang}
    The sentences of the CFG is a subset of the language of the GCD checker, modulo conversion between $\alphabet$ and $\vocab$.
\end{theorem}

\begin{theorem}[Language of GCD Checker subset of Grammar]
    \label{thm:CheckerLangSubsetGrammar}
    The language of the GCD checker is a subset of the sentences of the CFG, modulo conversion between $\alphabet$ and $\vocab$.
\end{theorem}
\begin{proof}
    This direction is trivial 
\end{proof}

\begin{theorem}[Prefix Language of Grammar subset Intermediate Language GCDChecker]
    \label{thm:PrefixSubsetIntermediate} 
    The prefixes of sentences of the CFG is a subset of the intermediate language of the GCD checker, modulo conversion between $\alphabet$ and $\vocab$.
\end{theorem}

\begin{theorem}[Intermediate Language GCDChecker subset Prefix Language of Grammar]
    \label{thm:IntermediateSubsetPrefix} 
    The intermediate language of the GCD checker is a subset of the prefixes of sentences of the CFG, modulo conversion between $\alphabet$ and $\vocab$.
\end{theorem}

Here are the final theorems that we want to ultimately prove. \ref{thm:LexSplit} may also be included as a final theorem.
\begin{theorem}[GCDChecker Complete]
    \label{thm:GCDCheckerComplete}
    \uses{def:CheckerSound,def:CFGLang,thm:GrammarSubsetCheckerLang,thm:CheckerLangSubsetGrammar, thm:PrefixSubsetIntermediate, thm:IntermediateSubsetPrefix}
    The GCD Checker is complete with respect to the language (sentences) of the CFG.
\end{theorem}
\begin{proof}
    Follows from above lemmas.
\end{proof}

\begin{theorem}[GCDChecker Sound]
    \label{thm:GCDCheckerSound}
    \uses{def:CheckerSound}
    The GCD checker is in fact sound.
\end{theorem}
\begin{proof}
    The first property follows from completeness. The second one should be provable based on the fact that the lexing transducer itself is path independent? We'll have to think about it more.
\end{proof}

